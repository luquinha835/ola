<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Olá — Lista de Tarefas</title>
    <style>
      :root{--bg:#f7fafc;--card:#ffffff;--accent:#2b6cb0}
      *{box-sizing:border-box}
      body{font-family:system-ui,Arial,Helvetica,sans-serif;background:var(--bg);margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
      .card{background:var(--card);width:100%;max-width:720px;padding:24px;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.08)}
      h1{margin:0 0 12px;color:var(--accent)}
      .new{display:flex;gap:8px;margin-bottom:16px}
      input[type="text"]{flex:1;padding:10px 12px;border:1px solid #e2e8f0;border-radius:8px}
      button{background:var(--accent);color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer}
      ul{list-style:none;padding:0;margin:0}
      li{display:flex;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px solid #edf2f7}
      li .left{display:flex;gap:12px;align-items:center}
      li.completed span{text-decoration:line-through;color:#94a3b8}
      .actions button{background:transparent;color:#718096;border:none;cursor:pointer;padding:6px}
      .meta{margin-top:12px;color:#667085;font-size:14px}
    </style>
  </head>
  <body>
    <main class="card" role="main">
      <h1>Lista de Tarefas</h1>

      <div class="new">
        <input id="taskInput" type="text" placeholder="Adicionar nova tarefa..." aria-label="nova tarefa" />
        <button id="addBtn">Adicionar</button>
      </div>

      <ul id="list" aria-live="polite"></ul>

      <div class="meta">
        <span id="count"></span>
        <div style="float:right">
          <button id="clearCompleted">Limpar concluídas</button>
        </div>
      </div>
    </main>

    <script>
      const STORAGE_KEY = 'ola_todos_v1'
      const input = document.getElementById('taskInput')
      const addBtn = document.getElementById('addBtn')
      const listEl = document.getElementById('list')
      const countEl = document.getElementById('count')
      const clearBtn = document.getElementById('clearCompleted')

      let todos = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]')

      function save(){
        localStorage.setItem(STORAGE_KEY, JSON.stringify(todos))
        render()
      }

      function addTask(text){
        if(!text || !text.trim()) return
        todos.push({id:Date.now(), text:text.trim(), done:false})
        save()
        input.value = ''
        input.focus()
      }

      function toggleDone(id){
        todos = todos.map(t=> t.id===id?{...t,done:!t.done}:t)
        save()
      }

      function removeTask(id){
        todos = todos.filter(t=> t.id!==id)
        save()
      }

      function clearCompleted(){
        todos = todos.filter(t=>!t.done)
        save()
      }

      function render(){
        listEl.innerHTML = ''
        if(todos.length===0){
          listEl.innerHTML = '<li><em>Sem tarefas — adicione algo acima.</em></li>'
        } else {
          todos.forEach(t=>{
            const li = document.createElement('li')
            li.className = t.done ? 'completed' : ''
            const left = document.createElement('div')
            left.className = 'left'
            const chk = document.createElement('input')
            chk.type = 'checkbox'
            chk.checked = t.done
            chk.addEventListener('change',()=> toggleDone(t.id))
            const span = document.createElement('span')
            span.textContent = t.text
            left.appendChild(chk)
            left.appendChild(span)

            const actions = document.createElement('div')
            actions.className = 'actions'
            const del = document.createElement('button')
            del.textContent = 'Remover'
            del.addEventListener('click',()=> removeTask(t.id))
            actions.appendChild(del)

            li.appendChild(left)
            li.appendChild(actions)
            listEl.appendChild(li)
          })
        }

        const total = todos.length
        const remaining = todos.filter(t=>!t.done).length
        countEl.textContent = `${remaining} de ${total} tarefas pendentes`
      }

      addBtn.addEventListener('click',()=> addTask(input.value))
      input.addEventListener('keydown',e=>{ if(e.key==='Enter') addTask(input.value) })
      clearBtn.addEventListener('click', clearCompleted)

      render()
    </script>
  </body>
</html>
